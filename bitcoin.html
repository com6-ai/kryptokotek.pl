<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krypto Kotek - Bitcoin Intelligence</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- GLOBALNE --- */
        :root {
            --bg-color: #0b0b0b;
            --text-primary: #e0e0e0;
            --accent-orange: #ff6f00;
            --font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            
            /* Zmienne Core.biz.pl */
            --btc-orange: #F7931A;
            --bg-dark: #0d1117;
            --card-bg-core: #161b22;
            --border-col: #30363d;
            --text-main: #c9d1d9;
            --neon-green: #2ea043;
            --neon-red: #da3633;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: var(--font-family);
            margin: 0;
            padding: 0;
        }

        /* --- SCROLL OFFSET (Naprawa zasłaniania) --- */
        section, div[id] {
            scroll-margin-top: 100px;
        }

        /* --- BRANDING HEADER (Górna Belka) --- */
        .brand-section {
            background-color: #050505;
            border-bottom: 1px solid #222;
            padding: 15px 0;
        }

        .header-logo { max-height: 60px; width: auto; display: block; }
        .logo-right { max-height: 85px; }

        h1 {
            font-size: 28px; font-weight: 700; letter-spacing: 1px;
            color: #fff; text-transform: uppercase; margin: 0; white-space: nowrap;
        }

        /* Kontakt */
        .contact-wrapper {
            display: flex; align-items: center; gap: 10px; margin-top: 5px; justify-content: center;
        }
        .contact-icons { display: flex; gap: 8px; }
        .icon-svg { width: 20px; height: 20px; fill: var(--accent-orange); }
        .icon-whatsapp { fill: #25D366; }

        .header-phone {
            color: var(--accent-orange); font-size: 18px; font-weight: 700;
            text-decoration: none; letter-spacing: 0.5px;
        }

        /* --- NAVBAR (Dolna Belka - Hybryda) --- */
        .navbar-custom {
            background-color: #000 !important;
            border-bottom: 1px solid var(--accent-orange);
            padding: 0;
        }

        .navbar-custom .nav-link {
            color: #ccc !important;
            text-transform: uppercase;
            font-weight: 600;
            font-size: 15px;
            padding: 6px 20px !important; /* Zmniejszony padding */
            transition: all 0.3s;
        }

        .navbar-custom .nav-link:hover, .navbar-custom .nav-link.active {
            color: #fff !important;
            background-color: var(--accent-orange);
        }

        .navbar-custom .dropdown-menu {
            background-color: #1a1a1a;
            border: 1px solid #333;
            border-top: none;
            margin-top: 0;
            border-radius: 0 0 4px 4px;
        }

        .navbar-custom .dropdown-item {
            color: #ccc;
            padding: 10px 20px;
        }
        
        .navbar-custom .dropdown-item:hover {
            background-color: #252525;
            color: var(--accent-orange);
        }

        /* POPRAWKA: Rozwijanie menu po najechaniu (dla Desktop), aby link matka (Home) był klikalny */
        @media (min-width: 992px) {
            .navbar-custom .nav-item.dropdown:hover .dropdown-menu {
                display: block;
            }
        }

        /* --- STYLE TREŚCI --- */
        .main-content-wrapper {
            background-color: var(--bg-dark);
            color: var(--text-main);
            padding-top: 40px;
            padding-bottom: 60px;
        }

        .card { background-color: var(--card-bg-core); border: 1px solid var(--border-col); box-shadow: 0 4px 20px rgba(0,0,0,0.3); }
        .card-header { background-color: rgba(255,255,255,0.02); border-bottom: 1px solid var(--border-col); font-weight: 600; letter-spacing: 1px; }

        .price-up { color: var(--neon-green); }
        .price-down { color: var(--neon-red); }
        .source-title { color: var(--btc-orange); font-weight: 800; font-size: 0.8rem; letter-spacing: 1px; }

        .metric-box { text-align: center; padding: 15px; border-radius: 8px; background: rgba(255,255,255,0.03); }
        .metric-value { font-size: 1.8rem; font-weight: bold; }
        .metric-label { font-size: 0.8rem; color: #8b949e; text-transform: uppercase; }

        .expert-json { background-color: #000; color: #0f0; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 0.8rem; max-height: 200px; overflow-y: auto; display: none; border: 1px solid #333; }
        .qr-container canvas { border: 5px solid #fff; border-radius: 5px; }

        .quantum-report-box {
            background: linear-gradient(45deg, #1a0505 0%, #121212 100%);
            border: 1px solid #842029;
        }
        .satoshi-link { color: var(--btc-orange); cursor: pointer; text-decoration: underline; text-decoration-style: dotted; }
        .satoshi-link:hover { color: #fff; }

        /* --- FOOTER STYLES --- */
        .footer {
            border-top: 1px solid #222;
            padding-top: 30px; padding-bottom: 20px;
            color: #666; font-size: 13px; line-height: 1.6;
            background-color: #050505;
        }
        .footer-columns { display: flex; gap: 40px; justify-content: space-between; text-align: left; align-items: center; }
        .footer-col { flex: 1; }
        .footer strong { color: #ccc; display: block; margin-bottom: 8px; }
        .footer a { color: var(--accent-orange); text-decoration: none; }
        .footer a:hover { text-decoration: underline; }
        .copyright {
            color: #444; font-size: 12px; margin-top: 30px;
            text-align: center; border-top: 1px solid #1a1a1a; padding-top: 15px;
        }

        /* Responsywność */
        @media (max-width: 992px) {
            .brand-section .container { flex-direction: column; gap: 15px; text-align: center; }
            .header-left, .header-right { justify-content: center; width: 100%; display: flex; }
            .header-center { width: 100%; }
            .footer-columns { flex-direction: column; gap: 20px; text-align: center; }
        }
    </style>
</head>
<body data-bs-theme="dark">

    <div class="brand-section">
        <div class="container d-flex justify-content-between align-items-center flex-wrap">
            
            <div class="header-left">
                <img src="images/kanga-kantor.png" alt="Kanga Kantor Partner" class="header-logo">
            </div>

            <div class="header-center text-center">
                <h1>Krypto Kotek</h1>
                <div class="contact-wrapper">
                    <div class="contact-icons">
                        <svg class="icon-svg" viewBox="0 0 24 24">
                            <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                        </svg>
                        <svg class="icon-svg icon-whatsapp" viewBox="0 0 24 24">
                            <path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.3 20.62C8.75 21.41 10.38 21.83 12.04 21.83C17.5 21.83 21.95 17.38 21.95 11.92C21.95 9.27 20.92 6.78 19.05 4.91C17.18 3.03 14.69 2 12.04 2M12.05 3.67C14.25 3.67 16.31 4.53 17.87 6.09C19.42 7.65 20.28 9.72 20.28 11.92C20.28 16.46 16.58 20.15 12.04 20.15C10.56 20.15 9.11 19.76 7.85 19L7.55 18.83L4.43 19.65L5.26 16.61L5.06 16.29C4.24 15 3.8 13.47 3.8 11.91C3.81 7.37 7.5 3.67 12.05 3.67M16.91 13.38C16.64 13.25 15.31 12.59 15.06 12.5C14.81 12.41 14.63 12.37 14.45 12.63C14.27 12.9 13.75 13.5 13.59 13.68C13.43 13.86 13.26 13.88 13 13.75C12.73 13.61 11.87 13.33 10.85 12.42C10.05 11.71 9.51 10.83 9.35 10.56C9.19 10.29 9.33 10.14 9.47 10C9.59 9.89 9.73 9.71 9.87 9.55C10 9.39 10.05 9.27 10.14 9.09C10.23 8.91 10.19 8.76 10.12 8.62C10.05 8.48 9.53 7.19 9.31 6.66C9.1 6.15 8.89 6.22 8.73 6.22C8.58 6.22 8.4 6.22 8.22 6.22C8.04 6.22 7.75 6.29 7.5 6.56C7.25 6.83 6.54 7.5 6.54 8.87C6.54 10.24 7.54 11.56 7.68 11.75C7.83 11.94 9.69 14.81 12.54 16.04C13.22 16.33 13.75 16.5 14.17 16.64C14.82 16.84 15.42 16.81 15.89 16.74C16.42 16.66 17.51 16.08 17.74 15.44C17.97 14.8 17.97 14.25 17.9 14.13C17.83 14.02 17.65 13.95 17.38 13.82L16.91 13.38Z"/>
                        </svg>
                    </div>
                    <a href="tel:+48604222999" class="header-phone">+48 604 222 999</a>
                </div>
            </div>

            <div class="header-right">
                <img src="images/logo_kk.png" alt="Logo Krypto Kotek" class="header-logo logo-right">
            </div>
        </div>
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark sticky-top navbar-custom shadow">
        <div class="container justify-content-center">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span> <span class="ms-2 small">MENU</span>
            </button>
            <div class="collapse navbar-collapse justify-content-center" id="mainNav">
                <ul class="navbar-nav">
                    
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="index.html" id="navHome">
                            Home
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="index.html#news">Aktualności</a></li>
                            <li><a class="dropdown-item" href="index.html#rates">Kursy wymiany</a></li>
                            <li><a class="dropdown-item" href="index.html#contact">Umów wizytę</a></li>
                        </ul>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle active" href="#" id="navBtc" role="button" data-bs-toggle="dropdown">
                            Bitcoin
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#explorer">Explorer</a></li>
                            <li><a class="dropdown-item" href="#converter">Konwerter</a></li>
                            <li><a class="dropdown-item" href="#quantum-deep">Zagrożenie Kwantowe</a></li>
                        </ul>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="edukacja.html" id="navEdu">
                            Edukacja
                        </a>
                    </li>

                </ul>
            </div>
        </div>
    </nav>

    <div class="main-content-wrapper">
        <div class="container" id="dashboard">
            <div class="row mb-4 g-3">
                <div class="col-md-6 col-lg-3">
                    <div class="metric-box border border-warning">
                        <div class="metric-label"><i class="fa-solid fa-hourglass-half text-warning"></i> Halving (Szac.)</div>
                        <div class="metric-value text-warning" id="halving-days">...</div>
                        <small class="text-secondary">Dni do 2028 r.</small>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="metric-box border border-secondary">
                        <div class="metric-label"><i class="fa-solid fa-gauge"></i> Fear & Greed</div>
                        <div class="metric-value" id="fng-value">...</div>
                        <small id="fng-text" class="text-secondary">...</small>
                    </div>
                </div>
                <div class="col-md-12 col-lg-6">
                    <div class="metric-box border border-secondary d-flex justify-content-around align-items-center h-100">
                        <div class="text-center">
                            <div class="source-title">BINANCE</div>
                            <div id="price-binance" class="fw-bold fs-5">...</div>
                        </div>
                        <div class="text-center border-start border-secondary ps-4 pe-4">
                            <div class="source-title">KRAKEN</div>
                            <div id="price-kraken" class="fw-bold fs-5">...</div>
                        </div>
                        <div class="text-center border-start border-secondary ps-4 pe-4">
                            <div class="source-title">COINBASE</div>
                            <div id="price-coinbase" class="fw-bold fs-5">...</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-5">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span><i class="fa-solid fa-chart-area text-warning"></i> Analiza Techniczna (7 Dni)</span>
                    <span class="badge bg-dark border border-secondary">CoinGecko API</span>
                </div>
                <div class="card-body">
                    <canvas id="btcChart" style="max-height: 400px; width: 100%;"></canvas>
                    
                    <div class="row mt-4 pt-3 border-top border-secondary text-center">
                        <div class="col-12 mb-2"><span class="badge bg-dark text-secondary border border-secondary">MEMPOOL FEES (sat/vB)</span></div>
                        <div class="col-4">
                            <h4 class="text-danger fw-bold" id="fee-high">-</h4>
                            <small class="text-secondary">High (~10m)</small>
                        </div>
                        <div class="col-4 border-start border-secondary">
                            <h4 class="text-warning fw-bold" id="fee-mid">-</h4>
                            <small class="text-secondary">Medium (~30m)</small>
                        </div>
                        <div class="col-4 border-start border-secondary">
                            <h4 class="text-success fw-bold" id="fee-low">-</h4>
                            <small class="text-secondary">Low (>1h)</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mb-5" id="converter">
            <div class="card border-secondary">
                <div class="card-header"><i class="fa-solid fa-calculator text-success"></i> Szybki Kalkulator</div>
                <div class="card-body">
                    <div class="row g-3 align-items-center">
                        <div class="col-md-5">
                            <label class="small text-secondary">Kwota w USD</label>
                            <input type="number" id="calc-usd" class="form-control bg-dark text-light border-secondary" placeholder="np. 100">
                        </div>
                        <div class="col-md-2 text-center">
                            <i class="fa-solid fa-arrow-right-arrow-left text-secondary fa-xl mt-4"></i>
                        </div>
                        <div class="col-md-5">
                            <label class="small text-secondary">Satoshi (sats)</label>
                            <input type="number" id="calc-sats" class="form-control bg-dark text-light border-secondary" placeholder="wynik...">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mb-5" id="explorer">
            <div class="p-4 bg-dark border border-secondary rounded-3 shadow">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h2 class="display-6 fw-bold text-warning mb-0"><i class="fa-solid fa-magnifying-glass"></i> Explorer</h2>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="expertToggle">
                        <label class="form-check-label small text-secondary" for="expertToggle">Tryb Eksperta (JSON)</label>
                    </div>
                </div>
                
                <div class="input-group mb-3 input-group-lg">
                    <input type="text" class="form-control bg-dark text-light border-secondary" placeholder="Wklej adres BTC (np. 1A1z...)" id="searchInput">
                    <button class="btn btn-warning fw-bold" type="button" id="btnSearch">ANALIZUJ</button>
                </div>
                
                <div id="explorer-result" class="d-none animate-fade-in">
                    <div class="row" id="pdf-content">
                        <div class="col-lg-8 mb-3">
                            <div class="card h-100 bg-secondary bg-opacity-10 border-secondary">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <h5 class="text-warning">Portfel On-Chain</h5>
                                        <button class="btn btn-sm btn-outline-light" onclick="generatePDF()"><i class="fa-solid fa-file-pdf"></i> PDF</button>
                                    </div>
                                    <p class="text-break font-monospace bg-black p-2 rounded border border-dark mb-3 small" id="res-address"></p>
                                    
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="mb-2">Saldo BTC: <strong id="res-balance" class="fs-4"></strong></div>
                                            <div class="mb-2">Wartość USD: <strong id="res-balance-usd" class="text-success"></strong></div>
                                            <div class="mb-2">Transakcji: <span id="res-txs"></span></div>
                                            <div class="mb-2 text-secondary small">Otrzymano łącznie: <span id="res-received"></span> BTC</div>
                                        </div>
                                        <div class="col-md-4 text-center">
                                            <div id="qrcode" class="qr-container d-flex justify-content-center"></div>
                                            <small class="text-muted d-block mt-2">Zeskanuj, aby wpłacić</small>
                                        </div>
                                    </div>
                                    
                                    <div id="json-viewer" class="expert-json mt-3"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 mb-3">
                            <div class="card h-100" id="quantum-card">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="fa-solid fa-shield-cat"></i> Audyt Kwantowy</h5>
                                    <div id="quantum-status-content"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="explorer-error" class="alert alert-danger d-none mt-3"></div>
            </div>
        </div>

        <div class="container mb-5" id="history">
            <div class="row">
                <div class="col-md-6 mb-4">
                    <h5 class="text-secondary border-bottom border-secondary pb-2">Ewolucja Adresów</h5>
                    <div class="accordion accordion-flush" id="accordionAddresses">
                        <div class="accordion-item bg-dark text-light border-secondary">
                            <h2 class="accordion-header"><button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#addr1">2009: P2PK (Podatny)</button></h2>
                            <div id="addr1" class="accordion-collapse collapse" data-bs-parent="#accordionAddresses"><div class="accordion-body text-secondary small">Klucz publiczny jawny w Blockchainie. Bardzo niebezpieczny.</div></div>
                        </div>
                        <div class="accordion-item bg-dark text-light border-secondary">
                            <h2 class="accordion-header"><button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#addr2">2010: P2PKH (Legacy)</button></h2>
                            <div id="addr2" class="accordion-collapse collapse" data-bs-parent="#accordionAddresses"><div class="accordion-body text-secondary small">Wprowadzenie hashowania (SHA-256). Bezpieczny do momentu wydania środków.</div></div>
                        </div>
                        <div class="accordion-item bg-dark text-light border-secondary">
                            <h2 class="accordion-header"><button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#addr3">2017: SegWit (Nowoczesny)</button></h2>
                            <div id="addr3" class="accordion-collapse collapse" data-bs-parent="#accordionAddresses"><div class="accordion-body text-secondary small">Oddzielenie podpisów (Witness). Tańsze transakcje, format bc1q...</div></div>
                        </div>
                        <div class="accordion-item bg-dark text-light border-secondary">
                            <h2 class="accordion-header"><button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#addr4">2021: Taproot (Prywatny)</button></h2>
                            <div id="addr4" class="accordion-collapse collapse" data-bs-parent="#accordionAddresses"><div class="accordion-body text-secondary small">Podpisy Schnorra i MAST. Zwiększona prywatność i skalowalność.</div></div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 mb-4" id="zombies">
                    <h5 class="text-secondary border-bottom border-secondary pb-2">Zombie Coins</h5>
                    <div class="card bg-dark border-secondary">
                        <div class="card-body">
                            <ul class="list-unstyled">
                                <li class="mb-3">
                                    <i class="fa-solid fa-user-secret text-warning"></i> <strong>Satoshi Nakamoto:</strong><br>
                                    <span class="small text-secondary">Posiada łącznie ok. 1.1 mln BTC (na tysiącach adresów). Jego symboliczny adres (Genesis) to:</span><br>
                                    <span class="satoshi-link small font-monospace" onclick="checkSatoshi()">1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa</span>
                                    <span class="badge bg-danger ms-2">P2PK</span>
                                </li>
                                <li class="small text-secondary">
                                    <i class="fa-solid fa-trash-can"></i> Szacuje się, że 3-4 mln BTC jest utracone na zawsze (zgubione klucze, spalone dyski).
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mb-5" id="quantum-deep">
            <div class="p-4 rounded quantum-report-box">
                <h3 class="text-danger mb-4"><i class="fa-solid fa-microchip"></i> Zagrożenie Kwantowe: Raport Techniczny</h3>
                
                <div class="row">
                    <div class="col-md-8">
                        <p class="text-secondary">
                            Obecne szyfrowanie Bitcoina (Krzywe Eliptyczne ECDSA) opiera się na trudności matematycznej odnalezienia klucza prywatnego na podstawie publicznego. 
                            Komputery kwantowe używające <strong>Algorytmu Shora</strong> teoretycznie mogą rozwiązać ten problem.
                        </p>
                        <div class="alert alert-dark border-secondary">
                            <strong class="text-success"><i class="fa-solid fa-shield-cat"></i> Dlaczego Hashing chroni nowe adresy?</strong><br>
                            <span class="text-secondary">
                                W nowoczesnych adresach (od P2PKH w górę), sieć nie widzi Twojego Klucza Publicznego, lecz jego <strong>Hash</strong> (skrót kryptograficzny SHA-256 + RIPEMD-160). 
                                Algorytm Shora potrafi łamać krzywe eliptyczne, ale <strong>nie potrafi odwracać funkcji skrótu (Hash)</strong>. 
                                Dopiero w momencie, gdy wysyłasz transakcję, musisz ujawnić Klucz Publiczny, aby sieć mogła sprawdzić podpis. Do tego momentu, komputer kwantowy nie ma danych wejściowych, by Cię zaatakować.
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4 text-end d-none d-md-block">
                        <i class="fa-solid fa-atom text-danger opacity-25" style="font-size: 8rem;"></i>
                    </div>
                </div>

                <hr class="border-danger opacity-25">

                <div class="row mt-4">
                    <div class="col-md-6">
                        <h5 class="text-light mb-3"><i class="fa-solid fa-layer-group text-danger"></i> Etapy Ataku</h5>
                        <div class="text-secondary">
                            <div class="mb-4">
                                <strong class="text-warning d-block mb-1">ETAP 1: Stare Adresy (P2PK)</strong>
                                Główne zagrożenie dotyczy adresów z lat 2009-2010 (w tym Satoshiego), gdzie klucz publiczny jest zapisany wprost w łańcuchu bloków. Komputer kwantowy używający Algorytmu Shora może efektywnie wyliczyć z niego klucz prywatny, łamiąc krzywą eliptyczną secp256k1 w relatywnie krótkim czasie, bez wiedzy właściciela.
                            </div>
                            <div>
                                <strong class="text-light d-block mb-1">ETAP 2: Atak "W Locie" (Front-Running)</strong>
                                Dla nowych adresów (P2PKH/SegWit) klucz publiczny jest ujawniany dopiero w momencie wysyłania transakcji. Aby ukraść środki, atakujący musiałby przechwycić transakcję w Mempoolu, wyliczyć klucz prywatny i wysłać własną transakcję z wyższą opłatą (RBF) zanim górnik wydobędzie blok (średnio 10 minut). To wymagałoby mocy obliczeniowej o rzędy wielkości większej niż Etap 1.
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6 border-start border-secondary">
                        <h5 class="text-light mb-3"><i class="fa-solid fa-shield-halved text-success"></i> Obrona Społeczności</h5>
                        <div class="text-secondary">
                            <div class="mb-4">
                                <strong class="text-success d-block mb-1">Migracja Post-Kwantowa (Soft-Fork)</strong>
                                Społeczność Bitcoin obserwuje rozwój technologii. W razie realnego zagrożenia zostanie wprowadzony Soft-Fork dodający nowe typy podpisów odpornych na kwanty (PQ), np. podpisy oparte na kratach (Lattice-based) lub jednorazowe podpisy Lamporta. Użytkownicy po prostu prześlą środki na nowe typy adresów, zabezpieczając je nową kryptografią.
                            </div>
                            <div>
                                <strong class="text-success d-block mb-1">Technika Commit-Reveal</strong>
                                Jako dodatkową warstwę ochrony można wymusić schemat "zobowiązania". Najpierw sieć akceptuje tylko Hash transakcji (bezpieczny, bo SHA-256 jest odporne na Shora). Dopiero gdy Hash zostanie utrwalony w bloku, użytkownik ujawnia klucz i podpis. Uniemożliwia to atak "w locie", ponieważ atakujący nie może zmienić transakcji, która została już "zaklepana" przez górników.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="glossaryModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content bg-dark border-secondary">
                    <div class="modal-header border-secondary">
                        <h5 class="modal-title text-warning">Słownik Pojęć</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body text-secondary">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item bg-dark text-light border-secondary"><strong>Satoshi (Sat):</strong> Najmniejsza jednostka Bitcoina. 1 BTC = 100,000,000 sat.</li>
                            <li class="list-group-item bg-dark text-light border-secondary"><strong>Mempool:</strong> "Poczekalnia" dla transakcji, które nie zostały jeszcze dodane do bloku.</li>
                            <li class="list-group-item bg-dark text-light border-secondary"><strong>Halving:</strong> Wydarzenie co 4 lata, zmniejszające nagrodę dla górników o połowę.</li>
                            <li class="list-group-item bg-dark text-light border-secondary"><strong>UTXO:</strong> Unspent Transaction Output - reszta z transakcji, którą możesz wydać.</li>
                            <li class="list-group-item bg-dark text-light border-secondary"><strong>Qubit:</strong> Bit kwantowy. Podstawa mocy obliczeniowej komputerów kwantowych.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="container">
            <div class="footer-columns">
                <div class="footer-col" style="flex: 1;">
                    <strong>Kontakt:</strong>
                    Email: kontakt@kryptokotek.pl<br>
                    Tel: +48 604 222 999 lub WhatsApp<br>
                    Telegram: <a href="https://t.me/tomekatomek" target="_blank">@tomekatomek</a><br>
                    Kanał: <a href="https://t.me/kryptokotek_pl" target="_blank">@kryptokotek_pl</a>
                </div>
                
                <div class="footer-col" style="flex: 0.6; display: flex; align-items: center; justify-content: center;">
                    <img src="images/logo_kk_kanga.png" alt="Krypto Kotek Kanga" style="max-width: 200px; height: auto;">
                </div>

                <div class="footer-col" style="flex: 1.6;">
                    <strong>Krypto Kotek Białołęka</strong>
                    Nasza placówka działa jako Certyfikowany Punkt Partnerski sieci Kanga Exchange.<br>
                    Operatorem usługi wymiany walut wirtualnych jest licencjonowany podmiot TRDX Sp. z o.o. z siedzibą w Gdańsku.<br>
                    Krypto Kotek (MY CRYPTO P.S.A.) pełni rolę agenta i pośrednika technicznego, dbając o najwyższe standardy obsługi klienta oraz zgodność z procedurami bezpieczeństwa (AML).
                </div>
            </div>
            <div class="copyright">
                © 2025 Krypto Kotek
            </div>
        </div>
    </div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<script>
    // --- SKRYPTY CORE.BIZ.PL ---
    // --- ZMIENNE GLOBALNE ---
    let currentBtcPrice = 0;
    const formatUSD = (num) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(num);

    // --- 1. ODLICZANIE HALVING (Estymacja) ---
    async function updateHalving() {
        try {
            // Pobierz wysokość bloku
            const res = await fetch('https://mempool.space/api/blocks/tip/height');
            const height = await res.text();
            const currentHeight = parseInt(height);
            
            // Halvingi są co 210,000 bloków. Ostatni był przy 840,000. Następny: 1,050,000.
            const nextHalvingBlock = 1050000;
            const blocksLeft = nextHalvingBlock - currentHeight;
            const minutesLeft = blocksLeft * 10; 
            const daysLeft = Math.floor(minutesLeft / 60 / 24);
            
            document.getElementById('halving-days').innerText = daysLeft;
        } catch(e) { console.error(e); }
    }

    // --- 2. FEAR & GREED INDEX ---
    async function fetchFnG() {
        try {
            const res = await fetch('https://api.alternative.me/fng/');
            const data = await res.json();
            const val = data.data[0].value;
            const txt = data.data[0].value_classification;
            
            const elVal = document.getElementById('fng-value');
            elVal.innerText = val;
            
            // Kolory
            if(val < 25) elVal.className = "metric-value text-danger"; // Extreme Fear
            else if(val > 75) elVal.className = "metric-value text-success"; // Greed
            else elVal.className = "metric-value text-warning"; // Neutral
            
            document.getElementById('fng-text').innerText = txt;
        } catch(e) { console.error(e); }
    }

    // --- 3. CENY & CHART ---
    async function fetchPrices() {
        try {
            // Binance
            let res = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT');
            let data = await res.json();
            currentBtcPrice = parseFloat(data.price);
            document.getElementById('price-binance').innerText = formatUSD(currentBtcPrice);
            
        } catch(e) {}
        
        // Inne giełdy (uproszczone dla szybkości kodu)
        try {
            let res = await fetch('https://api.coinbase.com/v2/prices/BTC-USD/spot');
            let data = await res.json();
            document.getElementById('price-coinbase').innerText = formatUSD(parseFloat(data.data.amount));
        } catch(e) {}
        
        try {
            let res = await fetch('https://api.kraken.com/0/public/Ticker?pair=XBTUSD');
            let data = await res.json();
            let key = Object.keys(data.result)[0];
            document.getElementById('price-kraken').innerText = formatUSD(parseFloat(data.result[key].c[0]));
        } catch(e) {}

        // Fees
        try {
            let res = await fetch('https://mempool.space/api/v1/fees/recommended');
            let fees = await res.json();
            document.getElementById('fee-high').innerText = fees.fastestFee;
            document.getElementById('fee-mid').innerText = fees.halfHourFee;
            document.getElementById('fee-low').innerText = fees.hourFee;
        } catch(e) {}
    }

    async function loadChart() {
        try {
            const res = await fetch('https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=7');
            const data = await res.json();
            const prices = data.prices.map(item => item[1]);
            const dates = data.prices.map(item => {
                const d = new Date(item[0]);
                return d.getDate() + '/' + (d.getMonth()+1) + ' ' + d.getHours() + ':00';
            });

            const ctx = document.getElementById('btcChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [{
                        label: 'BTC Price',
                        data: prices,
                        borderColor: '#F7931A',
                        backgroundColor: 'rgba(247, 147, 26, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        pointRadius: 0,
                        tension: 0.2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: { legend: { display: false } },
                    interaction: { intersect: false, mode: 'index' },
                    scales: {
                        y: { grid: { color: '#222' }, ticks: { color: '#666' } },
                        x: { display: false }
                    }
                }
            });
        } catch(e) {}
    }

    // --- 4. KALKULATOR SATS ---
    const calcUsd = document.getElementById('calc-usd');
    const calcSats = document.getElementById('calc-sats');

    calcUsd.addEventListener('input', () => {
        if(currentBtcPrice > 0) {
            const usd = parseFloat(calcUsd.value);
            const btc = usd / currentBtcPrice;
            const sats = Math.floor(btc * 100000000);
            calcSats.value = sats;
        }
    });

    calcSats.addEventListener('input', () => {
        if(currentBtcPrice > 0) {
            const sats = parseFloat(calcSats.value);
            const btc = sats / 100000000;
            const usd = btc * currentBtcPrice;
            calcUsd.value = usd.toFixed(2);
        }
    });

    // --- 5. EXPLORER LOGIC ---
    let lastJsonData = null;

    function checkSatoshi() {
        document.getElementById('searchInput').value = "1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa";
        window.location.href = "#explorer";
        document.getElementById('btnSearch').click();
    }

    function generatePDF() {
        const element = document.getElementById('pdf-content');
        const opt = {
            margin: 10,
            filename: 'bitcoin_report.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'landscape' }
        };
        html2pdf().set(opt).from(element).save();
    }

    document.getElementById('btnSearch').addEventListener('click', async () => {
        const address = document.getElementById('searchInput').value.trim();
        const resBox = document.getElementById('explorer-result');
        const errBox = document.getElementById('explorer-error');
        const qrDiv = document.getElementById('qrcode');
        const jsonViewer = document.getElementById('json-viewer');

        resBox.classList.add('d-none');
        errBox.classList.add('d-none');
        qrDiv.innerHTML = ""; // Clear QR

        if (!address) return;

        const btn = document.getElementById('btnSearch');
        btn.innerText = "ANALIZA...";
        btn.disabled = true;

        try {
            const response = await fetch(`https://mempool.space/api/address/${address}`);
            if (!response.ok) throw new Error("Nie znaleziono adresu.");
            
            const data = await response.json();
            lastJsonData = data; // Save for expert mode

            const funded = data.chain_stats.funded_txo_sum + data.mempool_stats.funded_txo_sum;
            const spent = data.chain_stats.spent_txo_sum + data.mempool_stats.spent_txo_sum;
            const balanceSats = funded - spent;
            const balanceBTC = balanceSats / 100000000;
            const balanceUSD = balanceBTC * currentBtcPrice;

            // Fill UI
            document.getElementById('res-address').innerText = address;
            document.getElementById('res-balance').innerText = balanceBTC.toFixed(8) + " BTC";
            document.getElementById('res-balance-usd').innerText = formatUSD(balanceUSD);
            document.getElementById('res-txs').innerText = data.chain_stats.tx_count + data.mempool_stats.tx_count;
            document.getElementById('res-received').innerText = (funded / 100000000).toFixed(8);

            // Generate QR
            new QRCode(qrDiv, {
                text: address,
                width: 100,
                height: 100,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });

            // Quantum Check
            const isSatoshi = address === "1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa";
            const spentCount = data.chain_stats.spent_txo_count + data.mempool_stats.spent_txo_count;
            const qCard = document.getElementById('quantum-card');
            const qContent = document.getElementById('quantum-status-content');

            if (spentCount > 0 || isSatoshi) {
                qCard.className = "card h-100 border-danger bg-danger bg-opacity-10";
                qContent.innerHTML = `
                    <h6 class="text-danger fw-bold text-uppercase">KLUCZ UJAWNIONY (Etap 1)</h6>
                    <p class="small mb-0">Adres wykonał transakcję lub jest publicznie znany (Genesis). Klucz publiczny dostępny w blockchainie.</p>
                    <hr>
                    <strong class="text-danger">RYZYKO WYSOKIE</strong>
                `;
            } else {
                qCard.className = "card h-100 border-success bg-success bg-opacity-10";
                qContent.innerHTML = `
                    <h6 class="text-success fw-bold text-uppercase">KLUCZ ZABEZPIECZONY</h6>
                    <p class="small mb-0">Brak transakcji wychodzących. Klucz publiczny ukryty za hashem (SHA-256).</p>
                    <hr>
                    <strong class="text-success">BEZPIECZNY (Do momentu wydania)</strong>
                `;
            }

            // Update JSON Viewer text
            jsonViewer.innerText = JSON.stringify(data, null, 2);

            resBox.classList.remove('d-none');
        } catch (err) {
            errBox.innerText = err.message;
            errBox.classList.remove('d-none');
        } finally {
            btn.innerText = "ANALIZUJ";
            btn.disabled = false;
        }
    });

    // Expert Toggle Logic
    document.getElementById('expertToggle').addEventListener('change', function() {
        const jsonViewer = document.getElementById('json-viewer');
        if(this.checked) {
            jsonViewer.style.display = 'block';
        } else {
            jsonViewer.style.display = 'none';
        }
    });

    // INIT
    fetchFnG();
    updateHalving();
    fetchPrices();
    loadChart();
    setInterval(fetchPrices, 60000);
</script>

</body>
</html>